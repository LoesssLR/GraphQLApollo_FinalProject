# ========================
# REPORTS                =
# ========================

# ========================
# 1. Add a Professional  =
# ========================

mutation {
  agregarProfesional(
    cedula: "604840754",
    nombre: "Luis López",
    genero: "Masculino",
    profesiones: ["Informática", "Electricista"]
  ) {
    cedula
    nombre
    profesiones
  }
}

mutation {
  agregarProfesional(
    cedula: "604840753",
    nombre: "Kevin Córdoba",
    genero: "Masculino",
    profesiones: ["Informática", "Otaku"]
  ) {
    cedula
    nombre
    profesiones
  }
}

# ========================
# 2. Add an Employer (Company with a lot of vacancies)
# ========================

mutation {
  agregarEmpleador(
    cedula: "302570430",
    nombre: "PuertoTech",
    tipo: "JURIDICA"
  ) {
    cedula
    nombre
    tipo
  }
}

mutation {
  agregarEmpleador(
    cedula: "604880547",
    nombre: "CRTech",
    tipo: "FISICA"
  ) {
    cedula
    nombre
    tipo
  }
}

# ========================
# 3. Add a Vacancy (you must replace empresaId with a valid one)
# ========================

# V1
mutation {
  agregarVacante(
    titulo: "Analista de Datos",
    area: "Informática",
    descripcion: "Responsable de análisis y visualización de datos para apoyar la toma de decisiones",
    empresaCedula: "302570430"
  ) {
    _id
    titulo
  }
}

# V2
mutation {
  agregarVacante(
    titulo: "Desarrollador Backend",
    area: "Informática",
    descripcion: "Desarrollo y mantenimiento de APIs y servicios para aplicaciones empresariales",
    empresaCedula: "302570430"
  ) {
    _id
    titulo
  }
}

# V3
mutation {
  agregarVacante(
    titulo: "Especialista en Ciberseguridad",
    area: "Informática",
    descripcion: "Implementación de medidas de seguridad y monitoreo de vulnerabilidades",
    empresaCedula: "302570430"
  ) {
    _id
    titulo
  }
}

# ========================
# 4. Add an Expediente (replace profesionalId)
# ========================

mutation {
  agregarExpediente(
    profesionalCedula: "604840754",
    titulos: [{ nombre: "Titulo de inglés." }],
    experiencias: []
  ) {
    titulos { _id nombre imagenUrl }
  }
}

# Using the URL that the mutation provide, the title can be inserted from Postman.

  http://localhost:4001/api/titulos/:id/imagen

# Query to GET the title image from Postman.

query {
  profesional(cedula: "604840754") {
    expediente { titulos { _id nombre imagenUrl } }
  }
}

# ========================
# 5. Apply a professional to vacancies (replace IDs) X3
# ========================

# Obtain IDs (professional and vacancies)

query GetIds {
  prof: profesional(cedula: "604840754") { _id nombre }
  vacs: vacantes { _id titulo }
}

# Postularse a 3 vacantes distintas.

Variables:

Prof = profesional ID
V1 = vacante ID 1
V2 = vacante ID 2
V3 = vacante ID 3

{
  "prof": "-",
  "v1":  "-",
  "v2":  "-",
  "v3":  "-"
}

Mutaciones: 

mutation Postular3Veces($prof: ID!, $v1: ID!, $v2: ID!, $v3: ID!) {
  post1: postularVacante(profesionalId: $prof, vacanteId: $v1) {
    cedula
    nombre
    postulaciones {
      fecha
      vacante {
        _id
        titulo
        area
        empresa { cedula nombre }
      }
    }
  }
  post2: postularVacante(profesionalId: $prof, vacanteId: $v2) {
    cedula
    nombre
    postulaciones {
      fecha
      vacante {
        _id
        titulo
        area
        empresa { cedula nombre }
      }
    }
  }
  post3: postularVacante(profesionalId: $prof, vacanteId: $v3) {
    cedula
    nombre
    postulaciones {
      fecha
      vacante {
        _id
        titulo
        area
        empresa { cedula nombre }
      }
    }
  }
}

# Validation: Check if the professional has applied to the vacancies.

# V4
mutation {
  agregarVacante(
    titulo: "Administrador de Base de Datos",
    area: "Informática",
    descripcion: "Gestión, optimización y respaldo de bases de datos para garantizar disponibilidad y seguridad de la información",
    empresaCedula: "302570430"
  ) {
    _id
    titulo
  }
}

query GetIds {
  prof: profesional(cedula: "604840754") { _id nombre }
  vacs: vacantes { _id titulo }
}

{
  "prof": "-",
  "v4":  "-"
}

mutation Postular4ta($prof: ID!, $v4: ID!) {
  post4: postularVacante(profesionalId: $prof, vacanteId: $v4) {
    cedula nombre
  }
}

# That should show an error.

# Verify professional applications.

query VerPostulaciones {
  profesional(cedula: "604840754") {
    nombre
    postulaciones {
      fecha
      vacante {
        _id
        titulo
        area
        empresa {
          cedula
          nombre
        }
      }
    }
  }
}

# ========================
# 6. List All Professionals
# ========================

query {
  profesionales {
    cedula
    nombre
    genero
    profesiones
  }
}

# ========================
# 7. List All Employers
# ========================

query {
  empleadores {
    cedula
    nombre
    tipo
    puestosOfertados {
      titulo
      area
    }
  }
}

# ========================
# 8. List All Vacancies
# ========================

query {
  vacantes {
    titulo
    area
    descripcion
    empresa {
      nombre
    }
  }
}

# ========================
# 9. Get Professionals by Area
# ========================

query {
  postulantesPorArea(area: "Informática") {
    nombre
    empresas
  }
}

# ========================
# 10. Area Count & Percentage
# ========================

query {
  conteoPorArea {
    area
    total
    porcentaje
  }
}

# ========================
# 11. Gender Distribution
# ========================

query {
  conteoPorGenero {
    genero
    total
  }
}



